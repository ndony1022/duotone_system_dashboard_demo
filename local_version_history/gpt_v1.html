<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>삼성닷컴 시스템맵 - 통합 대시보드</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
    <style>
        :root {
            --primary:#1428a0; --secondary:#0074c4; --accent:#00a4e4; --light:#f5f7fa; --dark:#2c3e50;
            --success:#2ecc71; --warning:#f39c12; --danger:#e74c3c; --gray:#95a5a6; --card-shadow:0 4px 12px rgba(0,0,0,.08);
        }
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Samsung One','Apple SD Gothic Neo','Malgun Gothic',sans-serif}
        body{background:#f0f2f5;color:#333;line-height:1.6}
        .container{display:grid;grid-template-columns:280px 1fr;min-height:100vh}
        /* sidebar */
        .sidebar{background:var(--primary);color:#fff;padding:20px 0;box-shadow:2px 0 10px rgba(0,0,0,.1);z-index:100}
        .logo{padding:20px;margin-bottom:20px;border-bottom:1px solid rgba(255,255,255,.1);text-align:center}
        .logo img{height:28px}
        .nav-section{margin-bottom:25px;padding:0 15px}
        .nav-title{font-size:12px;text-transform:uppercase;letter-spacing:1px;margin-bottom:15px;opacity:.7;padding:0 15px}
        .nav-item{display:flex;align-items:center;padding:12px 20px;margin-bottom:5px;border-radius:8px;cursor:pointer;transition:.3s}
        .nav-item:hover,.nav-item.active{background:rgba(255,255,255,.1)}
        .nav-item i{margin-right:12px;width:20px;text-align:center}
        /* main */
        .main-content{padding:25px 30px;overflow:auto;position:relative}
        .header{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;padding-bottom:15px;border-bottom:1px solid #eaecef}
        .page-title{font-size:26px;font-weight:700;color:var(--dark)}
        .page-subtitle{font-size:16px;color:var(--gray);margin-top:5px}
        .header-actions{display:flex;gap:12px}
        .btn{padding:10px 18px;border-radius:6px;border:none;cursor:pointer;font-weight:500;display:flex;align-items:center;gap:8px;transition:.2s}
        .btn-primary{background:var(--primary);color:#fff}
        .btn-outline{background:transparent;border:1px solid #ddd}
        .btn:hover{opacity:.9;transform:translateY(-2px)}
        /* filters small chips on dashboard */
        .filters{display:flex;gap:8px;margin:10px 0 20px}
        .filter-item{padding:6px 12px;border:1px solid #e0e4ea;border-radius:16px;background:#fff;color:#333;font-size:13px;cursor:pointer}
        .filter-item.active{background:var(--primary);border-color:var(--primary);color:#fff}
        /* controls */
        .controls{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;gap:15px}
        .search-box{position:relative;flex:1;max-width:400px}
        .search-box input{width:100%;padding:12px 15px 12px 40px;border:1px solid #ddd;border-radius:8px;font-size:15px}
        .search-box i{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:var(--gray)}
        .view-options{display:flex;gap:10px}
        .view-option{padding:8px 16px;border-radius:6px;background:#f0f2f5;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:6px}
        .view-option.active{background:var(--primary);color:#fff}
        /* dashboard cards */
        .dashboard-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;margin-bottom:30px}
        .card{background:#fff;border-radius:8px;box-shadow:var(--card-shadow);padding:20px;transition:.3s}
        .card:hover{transform:translateY(-5px);box-shadow:0 5px 15px rgba(0,0,0,.1)}
        .card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}
        .card-title{font-size:16px;font-weight:600}
        .card-value{font-size:24px;font-weight:700;margin-bottom:10px}
        .card-chart{height:80px;margin:15px 0}
        /* visualization */
        .visualization-area{background:#fff;border-radius:12px;box-shadow:var(--card-shadow);padding:25px;margin-bottom:30px;min-height:500px;position:relative;overflow:hidden}
        .sitemap-container{width:100%;height:600px;border:1px solid #eaecef;border-radius:8px;background:#fafbfc;position:relative;overflow:auto}
        .node{position:absolute;padding:12px 15px;border-radius:8px;font-size:14px;cursor:pointer;transition:.2s;box-shadow:0 2px 6px rgba(0,0,0,.1);display:flex;align-items:center;gap:8px;z-index:2}
        .node:hover{transform:scale(1.05);z-index:10;box-shadow:0 4px 12px rgba(0,0,0,.15)}
        .node-main{background:var(--primary);color:#fff;font-weight:600;z-index:5}
        .node-category{background:#fff;border:2px solid var(--secondary);color:var(--secondary);font-weight:500}
        .node-page{background:#fff;border:1px solid #eaecef;color:var(--dark)}
        .node-warning{border:2px solid var(--warning);background:#fffaf0}
        .node-danger{border:2px solid var(--danger);background:#fef0f0}
        .node-success{border:2px solid var(--success);background:#f0fdf0}
        .connector{position:absolute;background:#dde1e6;transform-origin:0 0;z-index:1;height:2px}
        .legend{display:flex;gap:20px;margin-top:20px;flex-wrap:wrap}
        .legend-item{display:flex;align-items:center;gap:8px;font-size:14px}
        .legend-color{width:16px;height:16px;border-radius:4px}
        /* detail panel */
        .detail-panel{position:fixed;top:0;right:-460px;width:450px;height:100vh;background:#fff;box-shadow:-5px 0 15px rgba(0,0,0,.1);z-index:1000;transition:right .3s ease;overflow-y:auto;padding:25px}
        .detail-panel.open{right:0}
        .panel-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;padding-bottom:15px;border-bottom:1px solid #eaecef}
        .close-panel{background:none;border:none;font-size:20px;cursor:pointer;color:var(--gray)}
        .panel-section{margin-bottom:25px}
        .panel-section-title{font-size:18px;font-weight:600;margin-bottom:15px;color:var(--dark)}
        .info-grid{display:grid;grid-template-columns:120px 1fr;gap:12px}
        .info-label{font-weight:600;color:var(--dark)}
        .info-value{color:#555}
        .status-badge{display:inline-block;padding:4px 10px;border-radius:20px;font-size:12px;font-weight:500}
        .status-success{background:#e8f5e9;color:var(--success)}
        .status-warning{background:#fff8e1;color:var(--warning)}
        .status-danger{background:#ffebee;color:var(--danger)}
        /* pages */
        .page{display:none}
        .page.active{display:block}
        .footer{text-align:center;padding:20px;color:var(--gray);font-size:14px;border-top:1px solid #eaecef;margin-top:30px}
        /* responsive */
        @media (max-width:1024px){
            .container{grid-template-columns:1fr}
            .sidebar{display:none}
            .detail-panel{width:100%;right:-100%}
        }
        @media (max-width:768px){
            .controls{flex-direction:column;align-items:stretch}
            .search-box{max-width:100%}
            .view-options{align-self:flex-start}
            .dashboard-grid{grid-template-columns:1fr}
        }
    </style>
</head>
<body>
<div class="container">
    <!-- 사이드바 -->
    <aside class="sidebar">
        <div class="logo">
            <img alt="Samsung" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMjAiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik04NS4yIDBINzQuNEM2OC44IDAgNjQgNC40IDY0IDEwYzAgNS42IDQuOCAxMCAxMC40IDEwSDEwMFYwSDg1LjJ6TTc0LjQgMTUuNkg4M1Y0LjRoLTguNmMtMy44IDAtNi44IDMtNi44IDUuNnMzIDUuNiA2LjggNS42ek0zMC44IDBIMjBjLTUuNiAwLTEwIDQuNC0xMCAxMGMwIDUuNiA0LjQgMTAgMTAgMTBoMTAuOGM1LjYgMCAxMC00LjQgMTAtMTAgMC01LjYtNC40LTEwLTEwLTEwem0wIDE1LjZIMjNjLTMuOCAwLTYuOC0zLTYuOC01LjZzMy01LjYgNi44LTUuNmg3LjhjMy44IDAgNi44IDMgNi44IDUuNi0uMiAyLjYtMyA1LjYtNi44IDUuNnptLTQ0LjYgNEgxMFY0LjRoLTdWMEgwdjIwaDNWMTUuNmg3YzMuOCAwIDYuOC0zIDYuOC01LjZzLTMtNS42LTYuOC01LjZ6TTEwIDExLjJoNC40YzIuMSAwIDMuOC0xLjcgMy44LTMuOHMtMS43LTMuOC0zLjgtMy44SDEwVjExLjJ6Ii8+PC9zdmc+" />
        </div>
        <div class="nav-section">
            <div class="nav-title">주요 메뉴</div>
            <div class="nav-item" data-page="dashboard"><i class="fas fa-th-large"></i> 대시보드</div>
            <div class="nav-item active" data-page="sitemap"><i class="fas fa-sitemap"></i> 사이트맵</div>
            <div class="nav-item" data-page="analytics"><i class="fas fa-chart-line"></i> 성능 분석</div>
            <div class="nav-item" data-page="content"><i class="fas fa-search"></i> 콘텐츠 검사</div>
        </div>
        <div class="nav-section">
            <div class="nav-title">분석</div>
            <div class="nav-item" data-page="users"><i class="fas fa-users"></i> 사용자 관리</div>
            <div class="nav-item" data-page="reports"><i class="fas fa-file-alt"></i> 보고서</div>
            <div class="nav-item" data-page="settings"><i class="fas fa-cog"></i> 설정</div>
        </div>
    </aside>

    <!-- 메인 콘텐츠 -->
    <main class="main-content">
        <!-- 대시보드 -->
        <section class="page" id="dashboard">
            <div class="header">
                <div>
                    <h1 class="page-title">삼성닷컴 시스템맵 대시보드</h1>
                    <p class="page-subtitle">전체 사이트 현황을 한눈에 확인하세요</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-outline" id="btnRefresh"><i class="fas fa-sync-alt"></i> 새로 고침</button>
                    <button class="btn btn-primary" id="btnReport"><i class="fas fa-download"></i> 보고서 생성</button>
                </div>
            </div>

            <div class="filters">
                <div class="filter-item active">전체</div>
                <div class="filter-item">MX(모바일)</div>
                <div class="filter-item">CE(가전)</div>
                <div class="filter-item">VD(영상)</div>
                <div class="filter-item">SDC(디스플레이)</div>
            </div>

            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header"><div class="card-title">전체 페이지 수</div><div><i class="fas fa-file"></i></div></div>
                    <div class="card-value" id="totalPages">1,247</div>
                    <div class="card-chart"><div style="height:100%;width:100%;background:#f0f2f5;border-radius:4px"></div></div>
                    <div>지난달 대비 12개 증가</div>
                </div>
                <div class="card">
                    <div class="card-header"><div class="card-title">관리 주체 미정 페이지</div><div><i class="fas fa-exclamation-triangle"></i></div></div>
                    <div class="card-value">47</div>
                    <div class="card-chart"><div style="height:100%;width:100%;background:#f0f2f5;border-radius:4px"></div></div>
                    <div>주간 5개 감소</div>
                </div>
                <div class="card">
                    <div class="card-header"><div class="card-title">최종 업데이트 6개월 초과</div><div><i class="fas fa-clock"></i></div></div>
                    <div class="card-value">89</div>
                    <div class="card-chart"><div style="height:100%;width:100%;background:#f0f2f5;border-radius:4px"></div></div>
                    <div>주간 3개 증가</div>
                </div>
                <div class="card">
                    <div class="card-header"><div class="card-title">에이전시별 담당 페이지</div><div><i class="fas fa-users"></i></div></div>
                    <div class="card-value">-</div>
                    <div class="card-chart"><div style="height:100%;width:100%;background:#f0f2f5;border-radius:4px"></div></div>
                    <div>A사: 512, B사: 423, C사: 312</div>
                </div>
            </div>

            <div class="visualization-area">
                <p style="text-align:center;padding:50px;color:#95a5a6">
                    사이트맵 미리보기 영역<br/>전체 사이트맵을 보려면 왼쪽 메뉴에서 '사이트맵'을 선택하세요.
                </p>
            </div>

            <div class="footer">
                <p>© 2025 Samsung.com System Map Dashboard. All rights reserved.</p>
                <p>Version 2.0.0 | Last updated: August 27, 2025</p>
            </div>
        </section>

        <!-- 사이트맵 -->
        <section class="page active" id="sitemap">
            <div class="header">
                <div>
                    <h1 class="page-title">시각적 사이트맵</h1>
                    <p class="page-subtitle">삼성닷컴의 전체 페이지 구조와 현황을 시각적으로 확인하세요</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-outline" id="btnExport"><i class="fas fa-download"></i> 내보내기</button>
                    <button class="btn btn-primary" id="btnReload"><i class="fas fa-sync-alt"></i> 새로 고침</button>
                </div>
            </div>

            <div class="controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="페이지 검색..." id="searchInput"/>
                </div>
                <div class="view-options">
                    <div class="view-option active"><i class="fas fa-project-diagram"></i> 계층 구조</div>
                    <div class="view-option"><i class="fas fa-circle-nodes"></i> 네트워크</div>
                    <div class="view-option"><i class="fas fa-list"></i> 목록 보기</div>
                </div>
            </div>

            <div class="visualization-area">
                <h3>삼성닷컴 전체 사이트 구조</h3>
                <p class="page-subtitle">노드를 클릭하면 상세 정보를 확인할 수 있습니다</p>

                <!-- NOTE: 내부 컨테이너 ID를 중복 피하기 위해 sitemapCanvas로 변경 -->
                <div class="sitemap-container" id="sitemapCanvas">
                    <!-- 예시 연결선(데모용) -->
                    <div class="connector" style="top:110px;left:180px;width:200px"></div>
                    <div class="connector" style="top:240px;left:180px;width:200px"></div>

                    <!-- 메인 노드 -->
                    <div class="node node-main" style="top:70px;left:100px" data-id="home"><i class="fas fa-home"></i> 홈</div>

                    <!-- 카테고리 -->
                    <div class="node node-category" style="top:200px;left:350px" data-id="mobile"><i class="fas fa-mobile-alt"></i> 모바일</div>
                    <div class="node node-category" style="top:70px;left:350px" data-id="tv"><i class="fas fa-tv"></i> TV & 디스플레이</div>
                    <div class="node node-category" style="top:330px;left:350px" data-id="appliances"><i class="fas fa-asterisk"></i> 가전</div>

                    <!-- TV -->
                    <div class="node node-page node-success" style="top:50px;left:600px" data-id="qled"><i class="fas fa-file"></i> QLED</div>
                    <div class="node node-page node-success" style="top:100px;left:600px" data-id="neoqled"><i class="fas fa-file"></i> Neo QLED</div>
                    <div class="node node-page node-warning" style="top:150px;left:600px" data-id="theframe"><i class="fas fa-file"></i> The Frame</div>
                    <div class="node node-page node-danger" style="top:200px;left:600px" data-id="lifestyletv"><i class="fas fa-file"></i> Lifestyle TV</div>

                    <!-- Mobile -->
                    <div class="node node-page" style="top:180px;left:600px" data-id="galaxys"><i class="fas fa-file"></i> Galaxy S 시리즈</div>
                    <div class="node node-page node-success" style="top:230px;left:600px" data-id="galaxyz"><i class="fas fa-file"></i> Galaxy Z 시리즈</div>
                    <div class="node node-page node-warning" style="top:280px;left:600px" data-id="galaxya"><i class="fas fa-file"></i> Galaxy A 시리즈</div>

                    <!-- DA -->
                    <div class="node node-page" style="top:300px;left:600px" data-id="refrigerator"><i class="fas fa-file"></i> 냉장고</div>
                    <div class="node node-page" style="top:350px;left:600px" data-id="washer"><i class="fas fa-file"></i> 세탁기</div>
                    <div class="node node-page node-danger" style="top:400px;left:600px" data-id="ac"><i class="fas fa-file"></i> 에어컨</div>
                </div>

                <div class="legend">
                    <div class="legend-item"><div class="legend-color" style="background:#1428a0"></div><span>메인 페이지</span></div>
                    <div class="legend-item"><div class="legend-color" style="background:#0074c4"></div><span>카테고리</span></div>
                    <div class="legend-item"><div class="legend-color" style="background:#fff;border:1px solid #ddd"></div><span>일반 페이지</span></div>
                    <div class="legend-item"><div class="legend-color" style="background:#2ecc71"></div><span>최신 업데이트</span></div>
                    <div class="legend-item"><div class="legend-color" style="background:#f39c12"></div><span>업데이트 필요</span></div>
                    <div class="legend-item"><div class="legend-color" style="background:#e74c3c"></div><span>관리자 확인 필요</span></div>
                </div>
            </div>

            <div class="footer">
                <p>© 2025 Samsung.com System Map Dashboard. All rights reserved.</p>
                <p>Version 2.0.0 | Last updated: August 27, 2025</p>
            </div>
        </section>

        <!-- 간략 섹션 -->
        <section class="page" id="analytics">
            <div class="header">
                <h1 class="page-title">성능 분석</h1>
                <p class="page-subtitle">사이트 성능 지표를 확인하고 분석합니다</p>
            </div>
            <div class="visualization-area">
                <p style="text-align:center;padding:100px;color:#95a5a6">성능 분석 대시보드<br/>이 섹션은 현재 개발 중입니다.</p>
            </div>
        </section>

        <section class="page" id="content">
            <div class="header">
                <h1 class="page-title">콘텐츠 검사</h1>
                <p class="page-subtitle">콘텐츠 상태를 확인하고 관리합니다</p>
            </div>
            <div class="visualization-area">
                <p style="text-align:center;padding:100px;color:#95a5a6">콘텐츠 검사 대시보드<br/>이 섹션은 현재 개발 중입니다.</p>
            </div>
        </section>

        <!-- 상세 패널 -->
        <aside class="detail-panel" id="detailPanel">
            <div class="panel-header">
                <h2 id="panelTitle">페이지 상세 정보</h2>
                <button class="close-panel" id="closePanel" aria-label="닫기"><i class="fas fa-times"></i></button>
            </div>

            <div class="panel-section">
                <h3 class="panel-section-title">기본 정보</h3>
                <div class="info-grid">
                    <div class="info-label">페이지 ID</div><div class="info-value" id="info-id">-</div>
                    <div class="info-label">URL</div><div class="info-value" id="info-url">-</div>
                    <div class="info-label">생성일</div><div class="info-value" id="info-created">-</div>
                    <div class="info-label">최종 수정</div><div class="info-value" id="info-modified">-</div>
                    <div class="info-label">관리 부서</div><div class="info-value" id="info-department">-</div>
                    <div class="info-label">담당자</div><div class="info-value" id="info-manager">-</div>
                </div>
            </div>

            <div class="panel-section">
                <h3 class="panel-section-title">상태 정보</h3>
                <div class="info-grid">
                    <div class="info-label">현재 상태</div><div class="info-value" id="info-status">-</div>
                    <div class="info-label">마지막 점검</div><div class="info-value" id="info-lastcheck">-</div>
                    <div class="info-label">다음 점검</div><div class="info-value" id="info-nextcheck">-</div>
                </div>
            </div>

            <div class="panel-section">
                <h3 class="panel-section-title">기술 정보</h3>
                <div class="info-grid">
                    <div class="info-label">에이전시</div><div class="info-value" id="info-agency">-</div>
                    <div class="info-label">CMS</div><div class="info-value" id="info-cms">-</div>
                    <div class="info-label">템플릿</div><div class="info-value" id="info-template">-</div>
                </div>
            </div>

            <div class="panel-section">
                <h3 class="panel-section-title">관련 페이지</h3>
                <div id="related-pages"><p>관련 페이지 정보가 없습니다.</p></div>
            </div>
        </aside>
    </main>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // 페이지 전환
    const navItems = document.querySelectorAll('.nav-item');
    const pages = document.querySelectorAll('.page');
    navItems.forEach(item => {
        item.addEventListener('click', () => {
            const target = item.getAttribute('data-page');
            pages.forEach(p => p.classList.remove('active'));
            navItems.forEach(n => n.classList.remove('active'));
            document.getElementById(target).classList.add('active');
            item.classList.add('active');
        });
    });

    // 상세 패널 엘리먼트
    const detailPanel = document.getElementById('detailPanel');
    const closePanel = document.getElementById('closePanel');
    const fill = (id, textOrNode) => { document.getElementById(id).innerHTML = textOrNode; };

    // 더미 데이터
    const pageData = {
        home:{title:'홈 페이지',id:'HOME_001',url:'https://www.samsung.com/kr',created:'2022-01-15',modified:'2025-08-20',
              department:'디지털플랫폼팀',manager:'김삼성 (02-1234-5678)',status:'정상',lastcheck:'2025-08-20',nextcheck:'2025-09-20',
              agency:'A 에이전시',cms:'Adobe Experience Manager',template:'메인 템플릿 v3.2',related:['mobile','tv','appliances']},
        mobile:{title:'모바일 카테고리',id:'CAT_MOBILE_001',url:'https://www.samsung.com/kr/mobile',created:'2022-02-10',modified:'2025-08-15',
              department:'MX 사업부',manager:'이모바일 (02-2345-6789)',status:'업데이트 필요',lastcheck:'2025-07-15',nextcheck:'2025-08-30',
              agency:'B 에이전시',cms:'Adobe Experience Manager',template:'서브 템플릿 v2.1',related:['galaxys','galaxyz','galaxya']},
        tv:{title:'TV & 디스플레이',id:'CAT_TV_001',url:'https://www.samsung.com/kr/tvs',created:'2022-02-18',modified:'2025-08-18',
              department:'VD 사업부',manager:'최TV (02-3456-7890)',status:'정상',lastcheck:'2025-08-18',nextcheck:'2025-09-18',
              agency:'A 에이전시',cms:'Adobe Experience Manager',template:'서브 템플릿 v2.2',related:['qled','neoqled','theframe','lifestyletv']},
        appliances:{title:'가전 카테고리',id:'CAT_DA_001',url:'https://www.samsung.com/kr/home-appliances',created:'2022-03-01',modified:'2025-07-28',
              department:'DA 사업부',manager:'한가전 (02-4567-8901)',status:'관리자 확인 필요',lastcheck:'2025-04-30',nextcheck:'2025-05-30',
              agency:'C 에이전시',cms:'Adobe Experience Manager',template:'서브 템플릿 v1.9',related:['refrigerator','washer','ac']},
        qled:{title:'QLED TV',id:'PROD_TV_QLED',url:'https://www.samsung.com/kr/tvs/qled',created:'2022-03-05',modified:'2025-08-25',
              department:'VD 사업부',manager:'박QLED (02-3456-7890)',status:'정상',lastcheck:'2025-08-25',nextcheck:'2025-09-25',
              agency:'A 에이전시',cms:'AEM',template:'제품 템플릿 v1.5',related:['neoqled','theframe']},
        neoqled:{title:'Neo QLED TV',id:'PROD_TV_NEOQLED',url:'https://www.samsung.com/kr/tvs/neo-qled',created:'2022-03-22',modified:'2025-08-10',
              department:'VD 사업부',manager:'송Neo (02-3456-7891)',status:'정상',lastcheck:'2025-08-10',nextcheck:'2025-09-10',
              agency:'A 에이전시',cms:'AEM',template:'제품 템플릿 v1.6'},
        theframe:{title:'The Frame',id:'PROD_TV_FRAME',url:'https://www.samsung.com/kr/tvs/the-frame',created:'2022-05-10',modified:'2025-06-01',
              department:'VD 사업부',manager:'김프레임 (02-3456-7892)',status:'업데이트 필요',lastcheck:'2025-06-01',nextcheck:'2025-07-01',
              agency:'B 에이전시',cms:'AEM',template:'제품 템플릿 v1.3'},
        lifestyletv:{title:'Lifestyle TV',id:'PROD_TV_LIFESTYLE',url:'https://www.samsung.com/kr/tvs/lifestyle',created:'2022-04-20',modified:'2025-03-15',
              department:'VD 사업부',manager:'정라이프 (02-4567-8901)',status:'관리자 확인 필요',lastcheck:'2025-03-15',nextcheck:'2025-04-15',
              agency:'C 에이전시',cms:'AEM',template:'제품 템플릿 v1.1'},
        galaxys:{title:'Galaxy S 시리즈',id:'PROD_MX_GALAXYS',url:'https://www.samsung.com/kr/smartphones/galaxy-s',created:'2022-04-01',modified:'2025-08-22',
              department:'MX 사업부',manager:'남갤S (02-2345-1111)',status:'정상',lastcheck:'2025-08-22',nextcheck:'2025-09-22',
              agency:'A 에이전시',cms:'AEM',template:'제품 템플릿 v2.0'},
        galaxyz:{title:'Galaxy Z 시리즈',id:'PROD_MX_GALAXYZ',url:'https://www.samsung.com/kr/smartphones/galaxy-z',created:'2022-04-10',modified:'2025-08-12',
              department:'MX 사업부',manager:'윤갤Z (02-2345-2222)',status:'정상',lastcheck:'2025-08-12',nextcheck:'2025-09-12',
              agency:'A 에이전시',cms:'AEM',template:'제품 템플릿 v2.0'},
        galaxya:{title:'Galaxy A 시리즈',id:'PROD_MX_GALAXYA',url:'https://www.samsung.com/kr/smartphones/galaxy-a',created:'2022-05-02',modified:'2025-05-30',
              department:'MX 사업부',manager:'최갤A (02-2345-3333)',status:'업데이트 필요',lastcheck:'2025-05-30',nextcheck:'2025-06-30',
              agency:'B 에이전시',cms:'AEM',template:'제품 템플릿 v1.7'},
        refrigerator:{title:'냉장고',id:'PROD_DA_REF',url:'https://www.samsung.com/kr/refrigerators',created:'2022-06-01',modified:'2025-07-10',
              department:'DA 사업부',manager:'김냉장 (02-4567-0001)',status:'정상',lastcheck:'2025-07-10',nextcheck:'2025-08-10',
              agency:'B 에이전시',cms:'AEM',template:'제품 템플릿 v1.9'},
        washer:{title:'세탁기',id:'PROD_DA_WASHER',url:'https://www.samsung.com/kr/washers',created:'2022-06-15',modified:'2025-06-20',
              department:'DA 사업부',manager:'박세탁 (02-4567-0002)',status:'정상',lastcheck:'2025-06-20',nextcheck:'2025-07-20',
              agency:'B 에이전시',cms:'AEM',template:'제품 템플릿 v1.8'},
        ac:{title:'에어컨',id:'PROD_DA_AC',url:'https://www.samsung.com/kr/air-conditioners',created:'2022-07-01',modified:'2025-02-12',
              department:'DA 사업부',manager:'이냉방 (02-4567-0003)',status:'관리자 확인 필요',lastcheck:'2025-02-12',nextcheck:'2025-03-12',
              agency:'C 에이전시',cms:'AEM',template:'제품 템플릿 v1.4'}
    };

    // 상태 뱃지 렌더
    function statusBadge(status){
        const map = { '정상':'status-success', '업데이트 필요':'status-warning', '관리자 확인 필요':'status-danger' };
        const cls = map[status] || 'status-success';
        return `<span class="status-badge ${cls}">${status}</span>`;
    }

    // 패널 열기
    function openPanel(key){
        const data = pageData[key] || {title:key, id:'-', url:'#', created:'-', modified:'-', department:'-', manager:'-', status:'-', lastcheck:'-', nextcheck:'-', agency:'-', cms:'-', template:'-'};

        document.getElementById('panelTitle').textContent = data.title || key;
        fill('info-id', data.id);
        fill('info-url', data.url !== '-' ? `<a href="${data.url}" target="_blank" rel="noopener">${data.url}</a>` : '-');
        fill('info-created', data.created);
        fill('info-modified', data.modified);
        fill('info-department', data.department);
        fill('info-manager', data.manager);
        fill('info-status', statusBadge(data.status));
        fill('info-lastcheck', data.lastcheck);
        fill('info-nextcheck', data.nextcheck);
        fill('info-agency', data.agency);
        fill('info-cms', data.cms);
        fill('info-template', data.template);

        const relatedWrap = document.getElementById('related-pages');
        if (data.related && data.related.length){
            relatedWrap.innerHTML = data.related.map(r=>{
                const d = pageData[r]; const name = d?.title || r;
                return `<div style="margin:6px 0"><a href="#" data-open="${r}"><i class="fas fa-link"></i> ${name}</a></div>`;
            }).join('');
            // 링크로도 패널 이동
            relatedWrap.querySelectorAll('a[data-open]').forEach(a=>{
                a.addEventListener('click', e=>{
                    e.preventDefault(); openPanel(a.getAttribute('data-open'));
                });
            });
        } else {
            relatedWrap.innerHTML = '<p>관련 페이지 정보가 없습니다.</p>';
        }

        detailPanel.classList.add('open');
    }

    // 노드 클릭 이벤트
    document.querySelectorAll('.node').forEach(n=>{
        n.addEventListener('click', ()=> openPanel(n.dataset.id));
    });

    // 패널 닫기
    closePanel.addEventListener('click', ()=> detailPanel.classList.remove('open'));
    document.addEventListener('keydown', e=>{ if(e.key==='Escape') detailPanel.classList.remove('open'); });

    // 검색 필터
    const searchInput = document.getElementById('searchInput');
    const nodes = Array.from(document.querySelectorAll('.node'));
    searchInput.addEventListener('input', ()=>{
        const q = searchInput.value.trim().toLowerCase();
        if(!q){ nodes.forEach(n=>{n.style.opacity='1'; n.style.outline='none';}); return; }
        nodes.forEach(n=>{
            const text = n.textContent.toLowerCase();
            const hit = text.includes(q) || (n.dataset.id||'').toLowerCase().includes(q);
            n.style.opacity = hit ? '1' : '.2';
            n.style.outline = hit ? '2px solid ' + getComputedStyle(document.documentElement).getPropertyValue('--accent') : 'none';
        });
    });

    // JSON 내보내기 (노드 좌표 + 메타)
    document.getElementById('btnExport').addEventListener('click', ()=>{
        const exportNodes = nodes.map(n=>({
            id:n.dataset.id, label:n.textContent.trim(),
            top:n.style.top, left:n.style.left, classes:n.className
        }));
        const payload = { exportedAt:new Date().toISOString(), nodes:exportNodes, pageData };
        const blob = new Blob([JSON.stringify(payload,null,2)], {type:'application/json'});
        const a = document.createElement('a'); a.href = URL.createObjectURL(blob);
        a.download = 'samsung-system-map-demo.json'; a.click();
        URL.revokeObjectURL(a.href);
    });

    // 더미 리포트/리로드 버튼 동작
    document.getElementById('btnReload').addEventListener('click', ()=> location.reload());
    const btnRefresh = document.getElementById('btnRefresh');
    if(btnRefresh) btnRefresh.addEventListener('click', ()=> alert('데이터 새로 고침(데모)'));
    const btnReport = document.getElementById('btnReport');
    if(btnReport) btnReport.addEventListener('click', ()=> alert('보고서 생성(데모)'));
});
</script>
</body>
</html>
